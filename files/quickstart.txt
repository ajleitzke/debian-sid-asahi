# Ethernet
ip l s
dhclient <device>

# Wifi
rmmod brcmfmac
rmmod brcmutil
mount /dev/sda1 /mnt
tar -C /lib/firmware/ -xf /mnt/linux-firmware.tar
umount /mnt
modprobe brcmfmac
vim /etc/wpa_supplicant/wpa_supplicant.conf
wpa_supplicant -i <interface> -c /etc/wpa_supplicant/wpa_supplicant.conf
dhclient wlan0

# Time
ntpdate pool.ntp.org
date --set 2022-01-25
date --set 14:21

# Configure timezone
dpkg-reconfigure tzdata

# Fix grub
apt-get purge grub-efi grub-efi-arm64 grub-efi-arm64-bin grub-efi-arm64-signed
apt-get install grub-efi-arm64
grub-install --removable /dev/nvme0n1p4
# Set removable media to yes and nvram to no
dpkg-reconfigure dpkg-reconfigure grub-efi-arm64
update-grub
find /boot/efi -name fbaa64.efi | xargs rm

See also: https://github.com/AsahiLinux/docs/wiki/U-Boot

# xorg
(air) [~] cat /etc/X11/xorg.conf.d/00-keyboard.conf
Section "InputClass"
        Identifier "system-keyboard"
        MatchIsKeyboard "on"
        Option "XkbLayout" "us"
        Option "XkbModel" "pc105"
        Option "XkbVariant" "de_se_fi"
        Option "XkbOptions" "ctrl:nocaps"
EndSection
(air) [~] cat /etc/X11/xorg.conf.d/30-input.conf
Section "InputClass"
  Identifier "libinput touchpad catchall"
  MatchIsTouchpad "on"
  MatchDevicePath "/dev/input/event*"
  Option "Tapping" "False"
  Option "TappingDrag" "False"
  Option "DisableWhileTyping" "True"
  Option "AccelProfile" "adaptive"
  Option "AccelSpeed" "0.3"
  Option "AccelerationNumerator" "2"
  Option "AccelerationDenominator" "1"
  Option "AccelerationThreshold" "4"
  Option "AdaptiveDeceleration" "2"
  Option "NaturalScrolling" "0"
        Option "TappingButtonMap" "lmr"
        Option "ClickMethod" "clickfinger"
  Driver "libinput"
EndSection

# Create a user
useradd -m -c 'user' user
passwd user

# Install gnome
apt-get install gnome
/etc/init.d/gdm3 start

# If you need to install the kernel on a bootstrapped system or one that needs recovery
wget https://tg.st/u/k.deb
dpkg -i k.deb

- You can also use the live system to install Debian on the m1, the rough outline is:

        - Create two paritions:

                - One 1 GB vfat
                - Rest with ext4

        - Use debootstrap to bootstrap debian

        - Install grub

        - reboot
