09:10 < j`ey> Glanzmann: `git rev-list 6f59bc24287..smc/work` that might work, not sure how it deals with merges. git rebase is the better way. but if you do that youre on your own!
09:19 < _jannau_> Glanzmann: git rebase --onto 5.17-rc3 6f59bc24287
09:23 < j`ey> if you add -p it can also preserve the merges

19:13 < j`ey> but there's also CONFIG_OF_DMA_DEFAULT_COHERENT, which makes of_dma_is_coherent always return true

21:02 < jannau> mps: you need https://lore.kernel.org/u-boot/20220208210215.8612-1-j@jannau.net/ for extlinux

ARCH: 23:29 < ah-[m]> yep, exactly. I had to grub-mkconfig -o /boot/grub/grub.cfg, and move my Image.gz to /boot, otherwise it was just what was on the wiki page

https://lore.kernel.org/linux-arm-kernel/20211011165707.138157-1-marcan@marcan.st/
19:02 < jannau> I think based on this branch https://github.com/AsahiLinux/linux/tree/cpufreq/v1

23:41 < kov> Glanzmann, hmm interesting, I'll try upgrading libinput firs then, see if that fixes it
23:42 < kov> it's weird because I remember the trackpad working a while ago
23:45 -!- mtjzh (~mtjzh@2a02:8388:1742:9b80:658f:93d3:ec68:d60e) has joined #asahi
23:46 < kov> yep, just upgrading to testing's libinput makes it work heh thanks Glanzmann!

Chromium 16KB patch: https://tg.st/u/Set-kernal-page-size-to-16K-on-loongson-MIPS-archtec.patch
10:10 < jannau> see the commit message for 64k on ppc64 https://chromium.googlesource.com/chromium/src.git/+/445c099c6486b8e5ff8dafaefcd812a7ea4bdfff%5E%21/
15:26 < tpw_rules> Glanzmann: https://pastebin.com/NzJEQJDW - https://tg.st/u/NzJEQJDW
15:26 < tpw_rules> last i checked the built chromium only worked with the flags --in-process-gpu --no-sandbox --no-zygote but that may have been a kernel config problem
Upstream BUG: https://bugs.webkit.org/show_bug.cgi?id=236564

22:39 < jannau> `dtc -I fs -O dts -o - /proc/device-tree` will output the device-tree as seen by linux

19:11 < Glanzmann> axboe: Could you explain how to mark a device as write-through? Does that mean if I issue a sync in Linux that no flush will happen. Because this would be helpful for the m1 notebook owners to improve performance.
19:11 < axboe> I just do: `echo "write through" > /sys/block/nvme0n1/queue/write_cache"` for now...
19:11 < axboe> Glanzmann: ^^
19:12 < axboe> Glanzmann: and yes, that's what it means
19:12 < Glanzmann> axboe: Thanks.
19:12 < axboe> Glanzmann: it'll bump your test case from 56 iops to 14k or something like that :)
19:12 < axboe> alternatively, some sort of time based hack might make sense
19:13 < axboe> "only issue flush if X seconds has passed since last issue"
19:13 < axboe> kinda nasty, but safer

15:50 < mps> axboe: Glanzmann: `libinput Disable While Typing Enabled (268):    1` is set in my case and it works fine
15:51 < mps> though I built latest beta of libinput and rebuilt xf86-input-libinput with it
15:52 < mps> i.e. libinput-1.19.901
15:52 < axboe> mps: promising
15:53 < mps> but still didn't got it to detect thumb
16:07 < mps> Glanzmann: `libinput quirks list /dev/input/event1` will show you features of input device
16:09 < mps> and `libinput quirks list /dev/input/event1` will show quirks from libinput database

From mps:
#!/bin/sh
echo 2 > /sys/module/hid_apple/parameters/fnmode
echo 1 > /sys/module/hid_apple/parameters/swap_fn_leftctrl
echo 1 > /sys/module/hid_apple/parameters/swap_opt_cmd

19:19 < Glanzmann> sven: Do you know why axboe set the admin queue to 2 instead of 8?
19:19 < sven> yes
19:19 < sven> almost all commands go through the io queue, no need to waste that space for the admin queue

# j`ey on deleting efi and Linux partitions from the gui in macos
20:46 < j`ey> Glanzmann: I didnt figure it out at the diskutil cli, but I managed to do it from the GUI, I think you have to erase/reformat as APFS before you can delete the volumes
10:53 < j`ey> Glanzmann: for your notes: < tpw_rules> you can delete a non-apfs partition with: diskutil eraseVolume free n disk0sX

08:54 < mixi> Glanzmann: the command you're looking for should be "dtc -I dtb -O dts /sys/firmware/fdt"
08:57 < jannau> Glanzmann: dtc -I fs -O dts -o - /proc/device-tree
